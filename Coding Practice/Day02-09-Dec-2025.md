## ðŸ”¹ Ansible â€” Install & Enable Nginx

---
- name: Install and start Nginx on Pathnex
  hosts: all
  become: yes

  tasks:
    - name: Install nginx
      yum:
        name: nginx
        state: present

    - name: Enable nginx
      service:
        name: nginx
        state: started
        enabled: yes


## ðŸ”¹ Terraform â€” EC2 with Tags (r5.2xlarge)

provider "aws" {
  region = "us-east-1"
}

resource "aws_instance" "PathnexEC2" {
  ami           = "ami-0abcd1234abcd1234"
  instance_type = "r5.2xlarge"

  tags = {    # Adding tag for identification and cost management,metadata for AWS.
    Name  = "Pathnex-Server"   # ec2 instance of pathnex-server name will be shown in aws console.
    Environment = "Training"    # It indicates usages (Dev/Test/Prod/Training).
    Owner       = "PathnexStudent"  # It tells to whom resource belongs or who own the resource.
  }
}


## ðŸ”¹ Kubernetes â€” Deployment with 2 Replicas

apiVersion: apps/v1
kind: Deployment
metadata:
  name: pathnex-deployment
spec:      # Desired state and configuration of the deployments.
  replicas: 2   # k8 will alwyas maintain 2 running pod.
  selector:  #Deployment use selector-->matchlabels to identify which pod it should control 
    matchLabels:     
      app: pathnex-app    # this means lable based selection method deployment will manage the pod which have pathnex-app labels
  template:     # its  a bluebringt used to create pods.
    metadata:
      labels:   # this is used for srvice discovery and selectors so it must match with the selector above.
        app: pathnex-app
    spec:      # it defines container and runtime of a pod.
      containers:
        - name: app
          image: nginx
          ports:
            - containerPort: 80


## ðŸ”¹ Shell Script â€” Disk Usage

#!/bin/bash
df -h      # It tells use Df -h command to check the disk usage space of a file in a human readable format.


# Maven Build
## ðŸ”¹ Jenkins Pipeline â€” Maven Build
You will learn how to **compile, test, and package a Java project** using Maven.

pipeline {
    agent any   # It tells run this pipeline  on any available Jenkins agent/node.
    tools {
        maven 'Maven-3.8.1'   # It tells Jenkins to use Maven-3.8.1 version tool.
        jdk 'JDK-17'        #  It tells jenkins Use java-17 for runnig maven.
    }
    stages {
        stage('Checkout') {   # it is the stage name shown in Jenkins pipeline.
            steps {
                git url: 'https://github.com/Pathnex/sample-java-app.git'
            }
        }
        stage('Compile') {
            steps {
                sh 'mvn clean compile'  # Delete previous build files and compile source code.
            }
        }
        stage('Test') {
            steps {
                sh 'mvn test'  # it tells we are checking the code is working properly 
            }
        }
        stage('Package') {
            steps {
                sh 'mvn package'  # Create Jar/War files output stored in folder.
            }
        }
    }
}

## ðŸ”¹ GitLab CI â€” Maven Build

stages:
  - build  # for compiling code.
  - test   # for running test.
  - package  # it is for creating final artifacts.

maven-build:  # job name 
  stage: build
  image: maven:3.8.1-jdk-17
  script:
    - git clone https://github.com/Pathnex/sample-java-app.git
    - cd sample-java-app
    - mvn clean compile

maven-test:
  stage: test
  image: maven:3.8.1-jdk-17
  script:
    - cd sample-java-app
    - mvn test

maven-package:
  stage: package
  image: maven:3.8.1-jdk-17
  script:
    - cd sample-java-app
    - mvn package